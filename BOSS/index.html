<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Projet AR</title>
    <script src="node_modules/aframe/dist/aframe.min.js"></script>
    <script src="node_modules/ar.js/aframe/build/aframe-ar.js"></script>

    <script src="https://unpkg.com/aframe-location-based-component@1.1.2/dist/location-based.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false;"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <a-assets>
        <img id="marqueur" src="chemin_vers_votre_image_de_reference" />
        <a-asset-item id="modele-3d" src="chemin_vers_votre_modele_3d.gltf"></a-asset-item>
      </a-assets>

      <a-marker
        type="pattern"
        patternurl="chemin_vers_votre_fichier_patt"
        preset="custom"
        id="marqueur"
        emitevents="true"
        cursor="rayOrigin: mouse"
      >
        <a-entity
          id="modele"
          gltf-model="#modele-3d"
          position="0 0 0"
          scale="0.1 0.1 0.1"
          animation-mixer
        ></a-entity>
      </a-marker>

      <a-entity
        id="gps-entite"
        location-based="latitude: 0; longitude: 0;"
        visible="false"
      >
        <a-entity
          id="modele-gps"
          gltf-model="#modele-3d"
          position="0 0 0"
          scale="0.1 0.1 0.1"
          animation-mixer
        ></a-entity>
      </a-entity>

      <a-camera-static
        look-controls
        wasd-controls
        rotation-reader
      ></a-camera-static>
    </a-scene>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const marker = document.getElementById("marqueur");
        const gpsEntite = document.getElementById("gps-entite");
        const modele = document.getElementById("modele");
        const modeleGps = document.getElementById("modele-gps");

        marker.addEventListener("markerFound", function() {
          modeleGps.object3D.position.copy(modele.object3D.position);
          modeleGps.object3D.rotation.copy(modele.object3D.rotation);
          modeleGps.object3D.scale.copy(modele.object3D.scale);

          gpsEntite.setAttribute("visible", "true");
          marker.setAttribute("visible", "false");
        });
      });
    </script>
  </body>
</html>
