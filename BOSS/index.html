<head>
   <meta charset="utf-8">
   <title>Projet AR</title>
   <script src="node_modules/aframe/dist/aframe-master.min.js"></script>
   <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
   <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js" defer></script>
   <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js" defer></script>
</head>
<body style="margin: 0; overflow: hidden;">
   <a-scene vr-mode-ui="enabled: false;" embedded arjs="sourceType: webcam; debugUIEnabled: true;">
      <a-assets>
         <a-asset-item id="modele-3d" src="https://raw.githack.com/MathisBonnefoi/BOSS_AR/master/BOSS-ELIXIR-AR.glb"></a-asset-item>
      </a-assets>
      <a-nft type="nft" url="https://raw.githack.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/trex-image/trex" id="marqueur" emitevents="true" cursor="rayOrigin: mouse" raycaster="objects: .raycastable">
         <a-entity id="modele" gltf-model="#modele-3d" position="0 0 0" scale="0.1 0.1 0.1" animation-mixer></a-entity>
      </a-nft>
      <a-entity id="gps-entite" location-based="latitude: 0; longitude: 0;" visible="false">
         <a-entity id="modele-gps" gltf-model="#modele-3d" position="0 0 0" scale="0.1 0.1 0.1" animation-mixer></a-entity>
      </a-entity>
      <a-camera-static look-controls wasd-controls rotation-reader></a-camera-static>
   </a-scene>
   <script>
      document.addEventListener("DOMContentLoaded", function() {
        const marker = document.getElementById("marqueur");
        const gpsEntite = document.getElementById("gps-entite");
        const modele = document.getElementById("modele");
        const modeleGps = document.getElementById("modele-gps");
      
        marker.addEventListener("markerFound", function() {
          modeleGps.object3D.position.copy(modele.object3D.position);
          modeleGps.object3D.rotation.copy(modele.object3D.rotation);
          modeleGps.object3D.scale.copy(modele.object3D.scale);
      
          gpsEntite.setAttribute("visible", "true");
          marker.setAttribute("visible", "false");
        });

        marker.addEventListener("markerLost", function() {
          gpsEntite.setAttribute("visible", "false");
          marker.setAttribute("visible", "true");
        });
      });
   </script>
</body>
